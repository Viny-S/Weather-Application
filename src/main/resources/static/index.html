<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather App</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
    const { useState } = React;
    const Cloud = () => <svg className="w-24 h-24" fill="currentColor" viewBox="0 0 24 24"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"/></svg>;
    const CloudRain = () => <svg className="w-24 h-24 text-blue-400" fill="currentColor" viewBox="0 0 24 24"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM11 18H9v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"/></svg>;
    const Sun = () => <svg className="w-24 h-24 text-yellow-400" fill="currentColor" viewBox="0 0 24 24"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/></svg>;
    const Wind = () => <svg className="w-24 h-24 text-cyan-400" fill="currentColor" viewBox="0 0 24 24"><path d="M14.5 17c0 1.65-1.35 3-3 3s-3-1.35-3-3h2c0 .55.45 1 1 1s1-.45 1-1-.45-1-1-1H2v-2h9.5c1.65 0 3 1.35 3 3zM19 6.5C19 4.57 17.43 3 15.5 3S12 4.57 12 6.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S16.33 8 15.5 8H2v2h13.5c1.93 0 3.5-1.57 3.5-3.5zm-.5 4.5H2v2h16.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5v2c1.93 0 3.5-1.57 3.5-3.5S20.43 11 18.5 11z"/></svg>;
    const Search = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>;
    const MapPin = () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>;

    function WeatherLanding() {
      const [city, setCity] = useState('');
      const [weatherData, setWeatherData] = useState(null);
      const [loading, setLoading] = useState(false);
      const [error, setError] = useState('');

      const searchWeather = async () => {
        if (!city.trim()) {
          setError('Please enter a city name');
          return;
        }

        setLoading(true);
        setError('');

        try {
          const response = await fetch(`/api/weather/${city}`);

          if (!response.ok) {
            throw new Error('City not found');
          }

          const data = await response.json();
          setWeatherData(data);
        } catch (err) {
          setError('Unable to fetch weather data. Please try again.');
          setWeatherData(null);
        } finally {
          setLoading(false);
        }
      };

      const handleKeyPress = (e) => {
        if (e.key === 'Enter') {
          searchWeather();
        }
      };

      const getWeatherIcon = () => {
        if (!weatherData) return <Cloud />;

        const weather = weatherData.weather?.toLowerCase() || '';

        if (weather.includes('rain') || weather.includes('drizzle')) {
          return <CloudRain />;
        } else if (weather.includes('cloud')) {
          return <Cloud />;
        } else if (weather.includes('clear') || weather.includes('sunny')) {
          return <Sun />;
        } else if (weather.includes('wind')) {
          return <Wind />;
        }

        return <Cloud />;
      };

      const getBackgroundGradient = () => {
        if (!weatherData) return 'bg-gradient-to-br from-blue-400 via-blue-500 to-purple-600';

        const weather = weatherData.weather?.toLowerCase() || '';

        if (weather.includes('rain') || weather.includes('drizzle')) {
          return 'bg-gradient-to-br from-gray-600 via-blue-700 to-gray-800';
        } else if (weather.includes('cloud') || weather.includes('overcast')) {
          return 'bg-gradient-to-br from-gray-400 via-gray-500 to-gray-600';
        } else if (weather.includes('clear') || weather.includes('sunny')) {
          return 'bg-gradient-to-br from-yellow-400 via-orange-400 to-red-500';
        } else if (weather.includes('snow')) {
          return 'bg-gradient-to-br from-blue-200 via-blue-300 to-gray-400';
        } else if (weather.includes('thunder') || weather.includes('storm')) {
          return 'bg-gradient-to-br from-gray-800 via-purple-900 to-black';
        } else if (weather.includes('fog') || weather.includes('mist')) {
          return 'bg-gradient-to-br from-gray-300 via-gray-400 to-blue-300';
        }

        return 'bg-gradient-to-br from-blue-400 via-blue-500 to-purple-600';
      };

      return (
        <div className={`min-h-screen ${getBackgroundGradient()} flex items-center justify-center p-4 transition-all duration-1000`}>
          <div className="absolute inset-0 bg-black opacity-10"></div>

          <div className="relative z-10 w-full max-w-2xl">
            <div className="text-center mb-12 animate-fade-in">
              <h1 className="text-6xl font-bold text-white mb-4 drop-shadow-lg">
                Weather App
              </h1>
              <p className="text-xl text-white opacity-90">
                Get real-time weather information for any city
              </p>
            </div>

            <div className="bg-white bg-opacity-20 backdrop-blur-lg rounded-3xl shadow-2xl p-8 mb-8 border border-white border-opacity-30">
              <div className="flex gap-3 mb-6">
                <div className="flex-1 relative">
                  <input
                    type="text"
                    value={city}
                    onChange={(e) => setCity(e.target.value)}
                    onKeyPress={handleKeyPress}
                    placeholder="Enter city name..."
                    className="w-full px-6 py-4 rounded-2xl bg-white bg-opacity-90 text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all text-lg"
                  />
                  <div className="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400">
                    <MapPin />
                  </div>
                </div>
                <button
                  onClick={searchWeather}
                  disabled={loading}
                  className="px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-2xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center gap-2"
                >
                  <Search />
                  {loading ? 'Searching...' : 'Search'}
                </button>
              </div>

              {error && (
                <div className="bg-red-500 bg-opacity-20 border border-red-300 text-white px-4 py-3 rounded-xl mb-4">
                  {error}
                </div>
              )}

              {weatherData && (
                <div className="animate-fade-in">
                  <div className="text-center mb-6">
                    <div className="flex justify-center mb-4 animate-bounce-slow">
                      {getWeatherIcon()}
                    </div>
                    <h2 className="text-4xl font-bold text-white mb-2 capitalize">
                      {weatherData.weather || 'N/A'}
                    </h2>
                    <p className="text-xl text-white opacity-90">
                      {city}
                    </p>
                  </div>

                  <div className="bg-white bg-opacity-30 rounded-2xl p-6 backdrop-blur-sm">
                    <h3 className="text-lg font-semibold text-white mb-3">Details</h3>
                    <p className="text-white text-lg leading-relaxed">
                      {weatherData.details || 'No additional details available'}
                    </p>
                  </div>
                </div>
              )}

              {!weatherData && !loading && !error && (
                <div className="text-center py-12">
                  <div className="mx-auto mb-4" style={{color: 'white', opacity: 0.5}}>
                    <Cloud />
                  </div>
                  <p className="text-white text-lg opacity-80">
                    Search for a city to see weather information
                  </p>
                </div>
              )}
            </div>

            <div className="text-center text-white opacity-75">
              <p>Powered by Weather API</p>
            </div>
          </div>

          <style>{`
            @keyframes fade-in {
              from {
                opacity: 0;
                transform: translateY(20px);
              }
              to {
                opacity: 1;
                transform: translateY(0);
              }
            }

            @keyframes bounce-slow {
              0%, 100% {
                transform: translateY(0);
              }
              50% {
                transform: translateY(-10px);
              }
            }

            .animate-fade-in {
              animation: fade-in 0.5s ease-out;
            }

            .animate-bounce-slow {
              animation: bounce-slow 2s ease-in-out infinite;
            }
          `}</style>
        </div>
      );
    }

    ReactDOM.render(<WeatherLanding />, document.getElementById('root'));
</script>
</body>
</html>